# 13.Statements

本章描述 Statement接口和子类PreparedStatement，CallableStatement。
同时包括语法转义，性能提示和自动生成键。

## 13.1 Statement接口

Statement接口定义了执行SQL语句的方法，不包含参数构造，PreparedStatement包含参数构造，
CallableStatement添加了从存储过程返回输出参数的方法。

## 13.1.1 创建Statement

创建代码如下所示：

```java
Connection conn = dataSource.getConnection(user, passwd);
Statement stmt = conn.createStatement()
```

每个连接可以创建多个statement

```java
// get a connection from the DataSource object ds
Connection conn = ds.getConnection(user, passwd);
// create two instances of Statement
Statement stmt1 = conn.createStatement();
Statement stmt2 = conn.createStatement();
```

#### 13.1.1.1 设置ResultSet配置

可以通过statement设置resultSet的参数，比如：类型，并发，持有性。例如代码：

```java
Connection conn = ds.getConnection(user, passwd);
Statement stmt = conn.createStatement(
    ResultSet.TYPE_SCROLL_INSENSITIVE,
    ResultSet.CONCUR_UPDATABLE,
    ResultSet.HOLD_CURSORS_OVER_COMMIT);
```

### 13.1.2 执行 Statement对象

执行时要判断语句的类型，如果是SQL查询语句，那么返回一个ResultSet对象，使用 `executeQuery`方法。
如果是一个DDL或DML语句，返回更新的条数，使用 `executeUpdate`. 如果语句类型未知，使用 `execute`方法。

#### 13.1.2.1 返回ResultSet对象

示例代码：

```java
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("select TITLE, AUTHOR, ISBN from BOOKLIST");
while (rs.next()){
    ... 
}
```

如果执行没有返回ResultSet，那么抛出 `SQLException` 异常。

#### 13.1.2.2 返回更新数量



